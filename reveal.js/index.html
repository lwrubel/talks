<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Disaster View</title>

		<meta name="description" content="Disaster View at DPLAfest developer showcase">
		<meta name="author" content="Laura Wrubel">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/beige.css" id="theme">
		<link rel="stylesheet" href="css/custom.css">
		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
					<h1>Disaster View</h1>
					<h3>Exploring images of catastrophe in large digital collections</h3>
					<p>DPLAfest 2015 Developer Showcase</p>
					<p>Laura Wrubel</p>
					<p>@liblaura</p>

					<aside class="notes">
						Hi, I'm going to be speaking about a small web app I created to explore images from DPLA and the Library of Congress
						Prints and Photographs Collection. But this lightning talk could just have easily been called...
					</aside>
				</section>
				<section>
					<h1>Learning to Code with the DPLA API</h1>
					<p>DPLAfest 2015 Developer Showcase</p>
					<p>Laura Wrubel</p>
					<p>@liblaura</p>

					<aside class="notes">
						Some context for my project is that I'm just now finishing three months of research leave from 
						George Washington University Libraries. The goal of my mini-sabbatical was to work on 
						developing my coding skills. Among my technical goals, I wanted to learn python, use a noSQL database, 
						use some javascript libraries, and make a few maps. 						
						The Maryland Institute for Technology in the Humanities, at University of Maryland hosted me
						and provided me with advice and encouragement as I worked on this project I'm going to share. 
					</aside>
				</section>

				<section data-background="sanfranppoc2.jpg">
					
					<aside class="notes">
					    I was interested in ways to explore and browse image content from large digital collections. Also, what is it like to 
					    combine data from DPLA with other content? 
					    
					    I chose to focus on images of catastrophe, specifically natural disasters. There are a lot of images in DPLA and in other collections of the effects
					    of earthquakes, hurricanes, floods, on our surroundings, especially built environment...
					</aside>
				</section>
				
				<section data-background="collapsedporch.jpeg">
					<aside class="notes">
					... and of how people cope in those events. 
					</aside>
				</section>
					
				<section> 
					<h2>Data sources</h2> 
					    <p><a href="http://dp.la/search?q=hurricanes&type%5B%5D=image&utf8=%E2%9C%93" target="_blank">DPLA</a></p>
				  		<p><a href="http://www.loc.gov/pictures/search/?co%21=hh&c=50&sp=2&q=floods&fa=displayed%3Aanywhere&fi=subjects" target="_blank">Library of Congress Prints and Photographs</a></p>
				
					<aside class="notes">I wrote two python scripts, to connect to the DPLA API and the Library of Congress PP Catalog, doing 
					a subject heading search on each type of disaster. Title field was too noisy, so I found I got the best results with a 
					broad subject search and used other fields, like the collection, as proxies for relevance and to filter out some noise.</aside>
				</section>	
					
				<section> <!-- data files written to disk -->
        		 	<p>23M, 45 files</p>
        		 	<pre><code data-trim contenteditable>
earthquakes-2015-04-01T10:27:45.901607-1-dpla.json
earthquakes-2015-04-01T10:27:45.901607-2-dpla.json
earthquakes-2015-04-01T10:27:45.901607-3-dpla.json
earthquakes-2015-04-01T10:27:45.901607-4-dpla.json
hurricanes-2015-04-01T10:27:45.901607-1-dpla.json
hurricanes-2015-04-01T10:27:45.901607-2-dpla.json
hurricanes-2015-04-01T10:27:45.901607-3-dpla.json
hurricanes-2015-04-01T10:27:45.901607-4-dpla.json
hurricanes-2015-04-01T10:27:45.901607-5-dpla.json
hurricanes-2015-04-01T10:27:45.901607-6-dpla.json
hurricanes-2015-04-01T10:27:45.901607-7-dpla.json
hurricanes-2015-04-01T10:27:45.901607-8-dpla.json
hurricanes-2015-04-01T10:27:45.901607-9-dpla.json
hurricanes-2015-04-01T10:27:45.901607-10-dpla.json
hurricanes-2015-04-01T10:27:45.901607-11-dpla.json
hurricanes-2015-04-01T10:27:45.901607-12-dpla.json
floods-2015-04-01T10:27:45.901607-1-dpla.json
floods-2015-04-01T10:27:45.901607-2-dpla.json
floods-2015-04-01T10:27:45.901607-3-dpla.json
floods-2015-04-01T10:27:45.901607-4-dpla.json
floods-2015-04-01T10:27:45.901607-5-dpla.json
floods-2015-04-01T10:27:45.901607-6-dpla.json
floods-2015-04-01T10:27:45.901607-7-dpla.json
floods-2015-04-01T10:27:45.901607-8-dpla.json
floods-2015-04-01T10:27:45.901607-9-dpla.json
floods-2015-04-01T10:27:45.901607-10-dpla.json
floods-2015-04-01T10:27:45.901607-11-dpla.json
forest-2015-04-01T10:27:45.901607-1-dpla.json
floods-2015-04-01T10:27:45.901607-12-dpla.json
earthquakes-2015-04-01T10:30:12.053349-1-ppoc.json
earthquakes-2015-04-01T10:30:12.053349-4-ppoc.json
earthquakes-2015-04-01T10:30:12.053349-3-ppoc.json
earthquakes-2015-04-01T10:30:12.053349-2-ppoc.json
hurricanes-2015-04-01T10:30:12.053349-1-ppoc.json
floods-2015-04-01T10:30:12.053349-3-ppoc.json
floods-2015-04-01T10:30:12.053349-2-ppoc.json
floods-2015-04-01T10:30:12.053349-1-ppoc.json
floods-2015-04-01T10:30:12.053349-6-ppoc.json
floods-2015-04-01T10:30:12.053349-5-ppoc.json
floods-2015-04-01T10:30:12.053349-4-ppoc.json
floods-2015-04-01T10:30:12.053349-9-ppoc.json
floods-2015-04-01T10:30:12.053349-8-ppoc.json
floods-2015-04-01T10:30:12.053349-7-ppoc.json
forest-2015-04-01T10:30:12.053349-1-ppoc.json
        		 	</code></pre> 
        		 		
				<aside class="notes">
					The scripts wrote the results to files, one file per page of results for each disaster. 
					This gave me a dataset I could use to create and recreate the database</aside>
				</section>
				
				<section>
				  
				  <section>
				  <h2>database: mongodb</h2>
				  <aside class="notes">I loaded the data into MongoDB, initially just loading the
				  JSON as received from each data source. But since I was dealing with different
				  record structures and metadata from the two different sources, that started to pose problems 
				  for writing queries to support the 
				  front end display.</aside>
				  </section>
				
				
				  <section>
				  <h3>normalizing the data</h3>
			 <small><table>
				<thead>
					<tr>
						<th>DPLA</th>
						<th>PPOC</th>
						<th>New Field</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>id</td>
						<td>pk</td>
						<td>id</td>
					<tr>
					<tr>
						<td>isShownAt</td>
						<td>links.resource</td>
						<td>nativeView</td>
					<tr>
					<tr>
						<td>isShownAt.rights</td>
						<td></td>
						<td>rights</td>
					<tr>
					<tr>
						<td>object</td>
						<td>image.thumb</td>
						<td>thumbnail</td>
					<tr>
					<tr>
						<td>provider.name</td>
						<td>collection</td>
						<td>provider</td>
					<tr>
					<tr>
						<td>sourceResource.collection.title</td>
						<td>collection</td>
						<td>coll</td>
					<tr>
					<tr>
						<td>sourceResource.date.begin</td>
						<td></td>
						<td>dateBegin</td>
					<tr>
					<tr>
						<td>sourceResource.date.displayDate</td>
						<td>created_published_date</td>
						<td>displayDate</td>
					<tr>
					<tr>
						<td>sourceResource.date.end</td>
						<td></td>
						<td>dateEnd</td>
					<tr>
					<tr>
						<td>sourceResource.description</td>
						<td></td>
						<td>description</td>
					<tr>
					<tr>
						<td>sourceResource.rights</td>
						<td></td>
						<td>rights</td>
					<tr>
					<tr>
						<td>sourceResource.spatial</td>
						<td></td>
						<td>spatial</td>
					<tr>
					<tr>
						<td>sourceResource.subject.name</td>
						<td>subjects</td>
						<td>subjects</td>
					<tr>
					<tr>
						<td>sourceResource.title</td>
						<td>title</td>
						<td>title</td>
					<tr>
					<tr>
						<td>http://dp.la/items/ + id</td>
						<td>links.item</td>
						<td>platformView</td>
					<tr>
				</tbody>
			</table></small>	
				<aside class="notes"> So I normalized the data on the way in, paring it down to what I needed
				for this particular app. 
				</aside>	  
				</section>
			  </section>  
				
				<section>
			  		<a href="http://disasterview.laurawrubel.org" target="_blank"><img src="app_home.png"></a>
			  		<aside class="notes"> The app is using Flask as a lightweight web framework, with PyMongo to connect to MongoDB. 
			  		
			  		You can browse by disaster type. (click on headings) It uses Masonry JS, with some infinite scroll. 
			  		Thumbnails are sorted by date, but I would have to do some cleanup to make it consistent. 
			  		Some of the LC metadata uses "circa". 
			  		
			  		SELECTIONS:
			  		You can select items and create a subset of data across the disasters. All of the ids are in the URL, so it's bookmarkable.
			        
			        MAP:
			        Map, made with Leaflet JS and the coordinates from DPLA's spatial data. [Geocoding data is difficult to do 100%
			        accurately, there are issues I had to deal with like coordinates for the center of the US being included. I know
			        DPLA is working on a new approach to geocoding based on GeoNames data and is fully aware of and addressing these kinds 
			        of issues. 
			        
			        Another example on an issues is that some records that are
			        matched up with locations outside of the US, when they're US images, so I used a rough bounding box for the US
			        to filter those out of the map, although I kept the records in the image sets.  ]
			        
			        IF THERE's TIME:
			        For the LC data, I was going to try to use GeoNames with the subject headings geographic data, but it turns out LC
			        is geocoding their data using their new online Gazetteer. I know this is DPLAfest, but I wanted to show something with LC's data: you can add 
			        ?fo=json to any item in their new search results, and get at that information. Their new JSON response isn't documented yet,
			        but it available to use.
			        </aside>
				</section>
				
				<section>
				 App: <a href="http://disasterview.laurawrubel.org">http://disasterview.laurawrubel.org</a>
				 Code: <a href="https://github.com/lwrubel/disasterview">https://github.com/lwrubel/disasterview</a>
				 <aside class="notes">
				 The app is available for the time being here. 
				 </aside>
				</section>
				
				<section>
					<h3>Photo credits</h3>
					<ul>
						<li><a href="http://www.loc.gov/pictures/item/det1994011902/PP/">"Post and Montgomery sts., corner of Market, San Francisco, Cal."</a>, c.1906. Library of Congress Prints and Photographs Division.</li>
						
						<li><a href="http://cdm16016.contentdm.oclc.org/cdm/ref/collection/p15077coll4/id/13">"Group Posing on Collapsed Porch"</a>, c1906. 
							Pawleys Island Civic Association, Georgetown County Digital Library.</li>
					</ul>
				</section>
					
						
	
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
